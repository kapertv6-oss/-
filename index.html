<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>HAKKA</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --bg:#0b0d14;
  --neon:#ff4d6d;
  --text:#f2f2f2;
  --card1:#161a2a;
  --card2:#0f1220;
  --dx-color:#ff8c00;
  --hellsing-color:#8a2be2;
  --spy-color:#00ced1;
  --user-color:#ff69b4;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Segoe UI, sans-serif;
  background:radial-gradient(circle at top,#14182a,var(--bg));
  color:var(--text);
  min-height:100vh;
  overflow-y:auto;
}
body::-webkit-scrollbar { width:8px; }
body::-webkit-scrollbar-track { background:#0b0d14; border-radius:8px; }
body::-webkit-scrollbar-thumb { background:var(--neon); border-radius:8px; }
body::-webkit-scrollbar-thumb:hover { background:#ff80a0; }

.characters-wrapper::-webkit-scrollbar { width:6px; }
.characters-wrapper::-webkit-scrollbar-track { background:#0b0d14; border-radius:6px; }
.characters-wrapper::-webkit-scrollbar-thumb { background:var(--neon); border-radius:6px; }
.characters-wrapper::-webkit-scrollbar-thumb:hover { background:#ff80a0; }

/* –ß–∞—Å—Ç–∏—Ü—ã */
.particle{
  position:absolute;
  width:4px;height:4px;
  background:var(--neon);
  border-radius:50%;
  opacity:.6;
  animation: float 14s linear infinite;
}
@keyframes float{
  from{transform:translateY(110vh);}
  to{transform:translateY(-10vh);}
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä */
.app{ max-width:420px; margin:auto; padding:16px; }

/* –≠–∫—Ä–∞–Ω—ã */
.screen{display:none;animation:fade .3s ease;}
.screen.active{display:block;}
@keyframes fade{ from{opacity:0;transform:translateY(8px);} to{opacity:1;} }

/* –ó–∞–≥–æ–ª–æ–≤–∫–∏ */
.title{ text-align:center; font-size:24px; font-weight:700; color:var(--neon); margin-bottom:16px; }

/* –ö–∞—Ä—Ç–æ—á–∫–∏ */
.card{ background:linear-gradient(180deg,var(--card1),var(--card2)); border-radius:16px; padding:14px; margin-bottom:14px; display:flex; flex-direction:column; align-items:center; transition:.3s; }
.card:hover{ transform:translateY(-2px); box-shadow:0 0 16px rgba(255,77,109,.4); }

/* –ö–Ω–æ–ø–∫–∏ */
button{ background:var(--neon); border:none; color:white; padding:10px; border-radius:12px; font-weight:600; cursor:pointer; width:100%; }

/* Inputs */
input,textarea,select{ width:100%; margin-top:8px; padding:10px; border-radius:12px; border:none; background:#161a2a; color:white; font-weight:600; outline:none; }
textarea{resize:none;height:70px}

/* –°—Ç–∏–ª—å select —Ñ–∏–ª—å—Ç—Ä */
#animeFilter{
  border:2px solid var(--neon);
  appearance:none;
  -webkit-appearance:none;
  -moz-appearance:none;
  cursor:pointer;
  background-image: url('data:image/svg+xml;charset=US-ASCII,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12"><polygon points="0,0 12,0 6,6" fill="white"/></svg>');
  background-repeat:no-repeat;
  background-position:right 12px center;
  background-size:12px 12px;
  transition:.3s;
}
#animeFilter:hover{ box-shadow:0 0 10px var(--neon); border-color:#ff80a0; }
#animeFilter:focus{ box-shadow:0 0 14px var(--neon); border-color:var(--neon); }

/* –ü—Ä–æ—Ñ–∏–ª—å */
.profile-row{ display:flex; justify-content:space-between; margin:10px 0; }
.token{color:var(--neon); font-weight:700}

/* –ü–µ—Ä—Å–æ–Ω–∞–∂–∏ */
.characters-wrapper{ max-height:50vh; overflow-y:auto; padding-right:6px; }
.characters-grid{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.char-card{text-align:center; opacity:0; animation:fadeInCard .4s forwards; }
@keyframes fadeInCard{ from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:none;} }
.avatar{ width:60px;height:60px; border-radius:50%; margin:0 auto 8px; background-size:cover; background-position:center; border:2px solid var(--neon); }
.char-card p{ font-size:13px; opacity:.85; line-height:1.3; }

/* –¶–≤–µ—Ç–æ–≤–∞—è –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ */
.char-label{ font-size:12px; margin-top:4px; font-weight:600; padding:2px 6px; border-radius:8px; color:white; display:inline-block; }
.dx-color{ background:var(--dx-color); }
.hellsing-color{ background:var(--hellsing-color); }
.spy-color{ background:var(--spy-color); }
.user-color{ background:var(--user-color); }

/* –ß–∞—Ç */
.chat-message{ padding:6px 10px; border-radius:12px; max-width:80%; word-wrap:break-word; color:white; margin-bottom:4px; }
.user-msg{ align-self:flex-end; background:var(--neon);}
.bot-msg{ align-self:flex-start; background:#161a2a; border:1px solid var(--neon);}
.cursor{ display:inline-block; color:var(--neon); margin-left:2px; font-weight:bold; }

/* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
@media (max-width:420px){
  .characters-grid{ grid-template-columns:1fr; }
}
</style>
</head>
<body>

<script>
for(let i=0;i<50;i++){
  const p=document.createElement("div");
  p.className="particle";
  p.style.left=Math.random()*100+"vw";
  p.style.animationDuration=10+Math.random()*10+"s";
  p.style.opacity=Math.random();
  document.body.appendChild(p);
}
</script>

<div class="app">

<!-- –ú–ï–ù–Æ -->
<div id="menu" class="screen active">
  <div class="title">Hakka AI</div>
  <div class="card"><button onclick="openProfile()">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button></div>
  <div class="card"><button onclick="openCharacters()">üéÆ –ü–µ—Ä—Å–æ–Ω–∞–∂–∏</button></div>
  <div class="card"><button onclick="openWorkshop()">‚öí –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è</button></div>
</div>

<!-- –ü–†–û–§–ò–õ–¨ -->
<div id="profile" class="screen">
  <div class="title">–ü—Ä–æ—Ñ–∏–ª—å</div>
  <input id="nickname" placeholder="–ù–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
  <div class="profile-row">
    <span>–¢–æ–∫–µ–Ω—ã</span>
    <span class="token" id="tokens">0</span>
  </div>
  <button onclick="saveProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
  <button onclick="goMenu()" style="margin-top:10px;">–ù–∞–∑–∞–¥</button>
</div>

<!-- –ü–ï–†–°–û–ù–ê–ñ–ò -->
<div id="characters" class="screen">
  <div class="title">–ü–µ—Ä—Å–æ–Ω–∞–∂–∏</div>

  <div style="margin-bottom:12px;">
    <select id="animeFilter" onchange="renderCharacters()">
      <option value="all">–í—Å–µ –∞–Ω–∏–º–µ</option>
      <option value="–•–µ–ª–ª—Å–∏–Ω–≥">–•–µ–ª–ª—Å–∏–Ω–≥</option>
      <option value="–°—Ç–∞—Ä—à–∞—è –®–∫–æ–ª–∞ DXD">–°—Ç–∞—Ä—à–∞—è –®–∫–æ–ª–∞ DXD</option>
      <option value="–°–µ–º—å—è –®–ø–∏–æ–Ω–∞">–°–µ–º—å—è –®–ø–∏–æ–Ω–∞</option>
      <option value="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ">–í–∞—à–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏</option>
    </select>
  </div>

  <div class="characters-wrapper">
    <div class="characters-grid" id="charactersGrid"></div>
  </div>
  <button onclick="goMenu()" style="margin-top:14px;">–ù–∞–∑–∞–¥</button>
</div>

<!-- –ú–ê–°–¢–ï–†–°–ö–ê–Ø -->
<div id="workshop" class="screen">
  <div class="title">–ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è</div>
  <div class="card">
    <strong>–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (100 —Ç–æ–∫–µ–Ω–æ–≤)</strong>
    <input id="charName" placeholder="–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞">
    <textarea id="charDesc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞"></textarea>
    <input id="charAvatar" placeholder="URL –∞–≤–∞—Ç–∞—Ä–∫–∏">
    <button onclick="createCharacter()" style="margin-top:10px;">–°–æ–∑–¥–∞—Ç—å</button>
  </div>
  <button onclick="goMenu()">–ù–∞–∑–∞–¥</button>
</div>

<!-- –ß–ê–¢ -->
<div id="chat" class="screen">
  <div class="title">–ß–∞—Ç —Å –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º</div>
  <div class="characters-wrapper" id="chatWindow" style="max-height:50vh; display:flex; flex-direction:column; gap:6px;"></div>
  <input id="userMessage" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
  <button onclick="sendMessage()" style="margin-top:6px;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å (-1 —Ç–æ–∫–µ–Ω)</button>
  <button onclick="goCharacters()" style="margin-top:10px;">–ù–∞–∑–∞–¥</button>
</div>

</div>

<script>
// –ü–µ—Ä—Å–æ–Ω–∞–∂–∏ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
const canonChars = [
  {name:"–ê–ª—É–∫–∞—Ä–¥", desc:"–î—Ä–µ–≤–Ω–∏–π –±–µ—Å—Å–º–µ—Ä—Ç–Ω—ã–π –≤–∞–º–ø–∏—Ä —Å –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ–π —Å–∏–ª–æ–π –∏ –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏. –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —â–∞–¥–∏—Ç –≤—Ä–∞–≥–æ–≤.", avatar:"https://i.pinimg.com/736x/ed/ba/36/edba369f339eb95915ea915a8b48eb2e.jpg", anime:"–•–µ–ª–ª—Å–∏–Ω–≥"},
  {name:"–°–µ—Ä–∞—Å –í–∏–∫—Ç–æ—Ä–∏—è", desc:"–ë—ã–≤—à–∞—è –ø–æ–ª–∏—Ü–µ–π—Å–∫–∞—è, —Å—Ç–∞–≤—à–∞—è –≤–∞–º–ø–∏—Ä—à–µ–π. –°–∏–ª—å–Ω–∞—è, —É–º–Ω–∞—è –∏ –∑–∞–±–æ—Ç–ª–∏–≤–∞—è, –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤–∞ –∑–∞—â–∏—Ç–∏—Ç—å —Å–≤–æ–∏—Ö –¥—Ä—É–∑–µ–π.", avatar:"https://avatars.mds.yandex.net/i?id=baf2a72f11162bd2c0f31908cd79b03170b017ae-16922605-images-thumbs&n=13", anime:"–•–µ–ª–ª—Å–∏–Ω–≥"},
  {name:"–ò–Ω—Ç–µ–≥—Ä–∞ –•–µ–ª–ª—Å–∏–Ω–≥", desc:"–ñ—ë—Å—Ç–∫–∞—è –∏ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞—è –ª–∏–¥–µ—Ä –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –•–µ–ª–ª—Å–∏–Ω–≥. –°–∏–ª—å–Ω–∞—è –ª–∏—á–Ω–æ—Å—Ç—å, —Ç—Ä–µ–±—É—é—â–∞—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –∏ –ø–æ—Ä—è–¥–∫–∞.", avatar:"https://tse4.mm.bing.net/th/id/OIP.ryA9tvA5aVlvzyWATzzqSgHaEE?rs=1&pid=ImgDetMain&o=7&rm=3", anime:"–•–µ–ª–ª—Å–∏–Ω–≥"},
  {name:"–†–∏–∞—Å –ì—Ä–µ–º–æ—Ä–∏", desc:"–•–∞—Ä–∏–∑–º–∞—Ç–∏—á–Ω–∞—è –¥–µ–º–æ–Ω–µ—Å—Å–∞, –æ–±–ª–∞–¥–∞—é—â–∞—è –∫—Ä–∞—Å–æ—Ç–æ–π –∏ —É–º–æ–º. –õ—é–±–∏—Ç –∏–Ω—Ç—Ä–∏–≥–∏ –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–∏—Ç—É–∞—Ü–∏—è–º–∏, –≤—Å–µ–≥–¥–∞ —É–≤–µ—Ä–µ–Ω–∞ –≤ —Å–µ–±–µ.", avatar:"https://zefirka.club/uploads/posts/2022-09/1662219894_4-zefirka-club-p-rias-gremori-na-avu-5.jpg", anime:"–°—Ç–∞—Ä—à–∞—è –®–∫–æ–ª–∞ DXD"},
  {name:"–ê–∫–µ–Ω–æ –•–∏–º—ç–¥–∑–∏–º–∞", desc:"–≠–Ω–µ—Ä–≥–∏—á–Ω–∞—è –∂—Ä–∏—Ü–∞ –º–æ–ª–Ω–∏–π. –û–±–æ–∂–∞–µ—Ç –≤—ã–∑–æ–≤—ã –∏ —É–º–µ–µ—Ç —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å —Å–∞–º—ã–º–∏ –æ–ø–∞—Å–Ω—ã–º–∏ —Å–∏—Ç—É–∞—Ü–∏—è–º–∏.", avatar:"https://tse2.mm.bing.net/th/id/OIP.khPZy1V5b1ahtbPtQ6nbSgHaHa?rs=1&pid=ImgDetMain&o=7&rm=3", anime:"–°—Ç–∞—Ä—à–∞—è –®–∫–æ–ª–∞ DXD"},
  {name:"–õ–æ–π–¥ –§–æ—Ä–¥–∂–µ—Ä", desc:"–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–Ω—ã–π —à–ø–∏–æ–Ω, –º–∞—Å—Ç–µ—Ä –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏. –î–µ–π—Å—Ç–≤—É–µ—Ç —Å–ø–æ–∫–æ–π–Ω–æ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ, –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –∫ —Å–ª–æ–∂–Ω—ã–º –º–∏—Å—Å–∏—è–º.", avatar:"https://i.pinimg.com/736x/e8/01/c2/e801c2db5c32af8ab7fec82eb2bd51cf.jpg", anime:"–°–µ–º—å—è –®–ø–∏–æ–Ω–∞"},
  {name:"–ô–æ—Ä –§–æ—Ä–¥–∂–µ—Ä", desc:"–°–º–µ—Ä—Ç–æ–Ω–æ—Å–Ω–∞—è —É–±–∏–π—Ü–∞, —Å–∫—Ä—ã–≤–∞—é—â–∞—è —Å–≤–æ–∏ —ç–º–æ—Ü–∏–∏. –í–µ—Ä–Ω–∞ —Å–≤–æ–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –∏ –∑–∞—â–∏—Ç–∏—Ç –±–ª–∏–∑–∫–∏—Ö –ª—é–±–æ–π —Ü–µ–Ω–æ–π.", avatar:"https://tse4.mm.bing.net/th/id/OIP.yzvjrPUBd16irp115FE_xQHaEK?rs=1&pid=ImgDetMain&o=7&rm=3", anime:"–°–µ–º—å—è –®–ø–∏–æ–Ω–∞"}
];

const profile = JSON.parse(localStorage.getItem("hakkaProfile")) || { nick:"–ò–≥—Ä–æ–∫", tokens:100 };
let activeChar = null;

function getUserChars(){ return JSON.parse(localStorage.getItem("customChars_"+profile.nick)) || []; }
function saveUserChars(chars){ localStorage.setItem("customChars_"+profile.nick, JSON.stringify(chars)); }

function openProfile(){ showScreen("profile"); nickname.value=profile.nick; tokens.textContent=profile.tokens; }
function saveProfile(){ profile.nick=nickname.value||"–ò–≥—Ä–æ–∫"; localStorage.setItem("hakkaProfile",JSON.stringify(profile)); alert("–ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω"); }
function openCharacters(){ showScreen("characters"); renderCharacters(); }
function openWorkshop(){ showScreen("workshop"); }
function goMenu(){ showScreen("menu"); }

function renderCharacters(){
  const grid=document.getElementById("charactersGrid");
  const filter=document.getElementById("animeFilter").value;
  grid.innerHTML="";
  let charsToShow=[...canonChars];
  const userChars=getUserChars();

  if(filter==="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ") charsToShow=userChars;
  else if(filter!=="all") charsToShow=charsToShow.filter(c=>c.anime===filter);
  if(filter==="all") charsToShow.push(...userChars.map(c=>({...c, anime:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ"})));

  charsToShow.forEach(c=>{
    let colorClass="user-color";
    if(c.anime==="–°—Ç–∞—Ä—à–∞—è –®–∫–æ–ª–∞ DXD") colorClass="dx-color";
    else if(c.anime==="–•–µ–ª–ª—Å–∏–Ω–≥") colorClass="hellsing-color";
    else if(c.anime==="–°–µ–º—å—è –®–ø–∏–æ–Ω–∞") colorClass="spy-color";
    grid.innerHTML+=`
      <div class="card char-card">
        <div class="avatar" style="background-image:url('${c.avatar}')"></div>
        <strong>${c.name}</strong>
        <div class="char-label ${colorClass}">${c.anime}</div>
        <p>${c.desc}</p>
        <button onclick="openChat('${c.name}')">üí¨ –ù–∞–ø–∏—Å–∞—Ç—å</button>
      </div>`;
  });
}

function createCharacter(){
  if(profile.tokens<100)return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤");
  if(!charName.value||!charDesc.value||!charAvatar.value)return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è");
  profile.tokens-=100;
  const chars=getUserChars();
  chars.push({name:charName.value,desc:charDesc.value,avatar:charAvatar.value,anime:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ"});
  saveUserChars(chars);
  localStorage.setItem("hakkaProfile",JSON.stringify(profile));
  charName.value=charDesc.value=charAvatar.value="";
  alert("–ü–µ—Ä—Å–æ–Ω–∞–∂ —Å–æ–∑–¥–∞–Ω (–¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤–∞–º)");
}

// –ß–ê–¢
function openChat(charName){ activeChar=charName; showScreen("chat"); document.getElementById("chatWindow").innerHTML=""; }
function goCharacters(){ activeChar=null; showScreen("characters"); }

function sendMessage(){
  const msgInput=document.getElementById("userMessage");
  const msg=msgInput.value.trim();
  if(!msg)return;
  if(profile.tokens<1){alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤!"); return;}

  const chatWin=document.getElementById("chatWindow");
  const userBlock=document.createElement("div");
  userBlock.className="chat-message user-msg";
  userBlock.textContent=msg;
  chatWin.appendChild(userBlock);
  msgInput.value=""; chatWin.scrollTop=chatWin.scrollHeight;

  const char = [...canonChars, ...getUserChars()].find(c => c.name === activeChar);
  if(!char) return;

  let botReply = "";
  switch(char.name){
    case "–†–∏–∞—Å –ì—Ä–µ–º–æ—Ä–∏":
      botReply = "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é —Ç–µ–±—è, –¥–æ—Ä–æ–≥–æ–π! üòà –Ø –†–∏–∞—Å, –∏ —Å–µ–≥–æ–¥–Ω—è –º—ã –ø—Ä–æ–≤–µ–¥—ë–º –≤—Ä–µ–º—è –≤–µ—Å–µ–ª–æ –∏ —Å –∏–Ω—Ç—Ä–∏–≥–æ–π. –ß—Ç–æ —É —Ç–µ–±—è –Ω–∞ —É–º–µ?";
      break;
    case "–ê–ª—É–∫–∞—Ä–¥":
      botReply = "–¢—ã –≤—ã–∑–≤–∞–ª –º–µ–Ω—è? –ì–æ—Ç–æ–≤ —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –ª—é–±–æ–≥–æ –≤—Ä–∞–≥–∞, –∫—Ç–æ –≤—Å—Ç–∞–Ω–µ—Ç –Ω–∞ –ø—É—Ç–∏. –†–∞—Å—Å–ª–∞–±—å—Å—è, –ø–æ–∫–∞ —è —Å—Ä–∞–∂–∞—é—Å—å —Å —Ç—å–º–æ–π.";
      break;
    case "–°–µ—Ä–∞—Å –í–∏–∫—Ç–æ—Ä–∏—è":
      botReply = "–Ø –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –∑–∞—â–∏—Ç–∏—Ç—å —Ç–µ–±—è. –î–∞–≤–∞–π –≤–º–µ—Å—Ç–µ —Ä–∞–∑–±–µ—Ä—ë–º—Å—è —Å –ª—é–±—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏. –ù–µ –±–æ–π—Å—è, —è —Ä—è–¥–æ–º!";
      break;
    case "–ò–Ω—Ç–µ–≥—Ä–∞ –•–µ–ª–ª—Å–∏–Ω–≥":
      botReply = "–î–µ–ª–∞ —Ç—Ä–µ–±—É—é—Ç —Å—Ç—Ä–æ–≥–æ—Å—Ç–∏ –∏ –ø–æ—Ä—è–¥–∫–∞. –°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º, –∏ –º—ã –¥–æ—Å—Ç–∏–≥–Ω–µ–º —Ü–µ–ª–∏. –°–ª–∞–±–æ—Å—Ç—å –∑–¥–µ—Å—å –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è.";
      break;
    case "–ê–∫–µ–Ω–æ –•–∏–º—ç–¥–∑–∏–º–∞":
      botReply = "–û—Ö, —ç—Ç–æ –±—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ! ‚ö° –Ø –ª—é–±–ª—é –≤—ã–∑–æ–≤—ã –∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏. –†–∞—Å—Å–∫–∞–∂–∏, —á—Ç–æ —É —Ç–µ–±—è –Ω–∞ —É–º–µ.";
      break;
    case "–õ–æ–π–¥ –§–æ—Ä–¥–∂–µ—Ä":
      botReply = "–í—Å–µ –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º. –†–∞—Å—Å–ª–∞–±—å—Å—è, —è —Ä–∞–∑–±–µ—Ä—É—Å—å —Å –ª—é–±—ã–º–∏ —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏. –ù–µ –¥–æ–≤–µ—Ä—è–π –≤—Ä–∞–≥–∞–º, —è –≤—Å–µ–≥–¥–∞ —Ä—è–¥–æ–º.";
      break;
    case "–ô–æ—Ä –§–æ—Ä–¥–∂–µ—Ä":
      botReply = "–û–ø–∞—Å–Ω–æ –±—ã—Ç—å —Å–æ –º–Ω–æ–π —Ä—è–¥–æ–º, –Ω–æ —è –∑–∞—â–∏—â—É —Ç–µ–±—è. üíÄ –î–∞–≤–∞–π –æ–±—Å—É–¥–∏–º, —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å.";
      break;
    default:
      botReply = "–ü—Ä–∏–≤–µ—Ç! –Ø –ø–µ—Ä—Å–æ–Ω–∞–∂, –∏ —Å–∫–æ—Ä–æ –Ω–∞—É—á—É—Å—å –≥–æ–≤–æ—Ä–∏—Ç—å –±–æ–ª—å—à–µ üòé";
  }

  profile.tokens -= 1;
  localStorage.setItem("hakkaProfile", JSON.stringify(profile));
  document.getElementById("tokens").textContent = profile.tokens;

  const botBlock=document.createElement("div");
  botBlock.className="chat-message bot-msg"; 
  botBlock.style.opacity=0;
  botBlock.innerHTML=`<span class="typing-text"></span><span class="cursor">|</span>`;
  chatWin.appendChild(botBlock);
  setTimeout(()=>botBlock.style.opacity=1,50);

  let i=0;
  const textElem=botBlock.querySelector(".typing-text");
  const cursor=botBlock.querySelector(".cursor");
  const cursorBlink=setInterval(()=>{cursor.style.visibility=(cursor.style.visibility==='visible')?'hidden':'visible';},500);

  function typeWriter(){
    if(i<botReply.length){ 
      textElem.textContent+=botReply[i]; 
      i++; 
      chatWin.scrollTop=chatWin.scrollHeight; 
      setTimeout(typeWriter,30); 
    } else { 
      clearInterval(cursorBlink); 
      cursor.remove(); 
    }
  }
  typeWriter();
}

function showScreen(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}
</script>

</body>
</html>

