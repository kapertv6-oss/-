<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>HAKKA</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --bg:#0b0d14;
  --neon:#ff4d6d;
  --text:#f2f2f2;
  --card1:#161a2a;
  --card2:#0f1220;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Segoe UI, sans-serif;
  background:radial-gradient(circle at top,#14182a,var(--bg));
  color:var(--text);
  min-height:100vh;
  overflow-y:auto;
}

/* –ù–ï–û–ù–û–í–´–ô –°–ö–†–û–õ–õ */
body::-webkit-scrollbar { width:8px; }
body::-webkit-scrollbar-track { background:#0b0d14; border-radius:8px; }
body::-webkit-scrollbar-thumb { background:var(--neon); border-radius:8px; transition:0.3s; }
body::-webkit-scrollbar-thumb:hover { background:#ff80a0; }
body { scrollbar-width: thin; scrollbar-color: var(--neon) #0b0d14; }

.characters-wrapper::-webkit-scrollbar { width:6px; }
.characters-wrapper::-webkit-scrollbar-track { background:#0b0d14; border-radius:6px; }
.characters-wrapper::-webkit-scrollbar-thumb { background:var(--neon); border-radius:6px; }
.characters-wrapper::-webkit-scrollbar-thumb:hover { background:#ff80a0; }

/* –ß–∞—Å—Ç–∏—Ü—ã */
.particle{
  position:absolute;
  width:4px;height:4px;
  background:var(--neon);
  border-radius:50%;
  opacity:.6;
  animation: float 14s linear infinite;
}
@keyframes float{
  from{transform:translateY(110vh);}
  to{transform:translateY(-10vh);}
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä */
.app{
  max-width:420px;
  margin:auto;
  padding:16px;
}

/* –≠–∫—Ä–∞–Ω—ã */
.screen{display:none;animation:fade .3s ease;}
.screen.active{display:block;}
@keyframes fade{
  from{opacity:0;transform:translateY(8px);}
  to{opacity:1;}
}

/* –ó–∞–≥–æ–ª–æ–≤–∫–∏ */
.title{
  text-align:center;
  font-size:24px;
  font-weight:700;
  color:var(--neon);
  margin-bottom:16px;
}

/* –ö–∞—Ä—Ç–æ—á–∫–∏ */
.card{
  background:linear-gradient(180deg,var(--card1),var(--card2));
  border-radius:16px;
  padding:14px;
  margin-bottom:14px;
}

/* –ö–Ω–æ–ø–∫–∏ */
button{
  background:var(--neon);
  border:none;
  color:white;
  padding:10px;
  border-radius:12px;
  font-weight:600;
  cursor:pointer;
  width:100%;
}

/* Inputs */
input,textarea{
  width:100%;
  margin-top:8px;
  padding:8px;
  border-radius:10px;
  border:none;
  background:#0b0d18;
  color:white;
}
textarea{resize:none;height:70px}

/* –ü—Ä–æ—Ñ–∏–ª—å */
.profile-row{
  display:flex;
  justify-content:space-between;
  margin:10px 0;
}
.token{color:var(--neon);font-weight:700}

/* –ü–µ—Ä—Å–æ–Ω–∞–∂–∏ */
.characters-wrapper{
  max-height:65vh;
  overflow-y:auto;
  padding-right:6px;
}
.characters-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}
.char-card{text-align:center}
.avatar{
  width:60px;height:60px;
  border-radius:50%;
  margin:0 auto 8px;
  background-size:cover;
  background-position:center;
  border:2px solid var(--neon);
}
.char-card p{
  font-size:13px;
  opacity:.85;
  line-height:1.3;
}
</style>
</head>
<body>

<script>
for(let i=0;i<50;i++){
  const p=document.createElement("div");
  p.className="particle";
  p.style.left=Math.random()*100+"vw";
  p.style.animationDuration=10+Math.random()*10+"s";
  p.style.opacity=Math.random();
  document.body.appendChild(p);
}
</script>

<div class="app">

<!-- –ú–ï–ù–Æ -->
<div id="menu" class="screen active">
  <div class="title">Hakka AI</div>
  <div class="card"><button onclick="openProfile()">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button></div>
  <div class="card"><button onclick="openCharacters()">üéÆ –ü–µ—Ä—Å–æ–Ω–∞–∂–∏</button></div>
  <div class="card"><button onclick="openWorkshop()">‚öí –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è</button></div>
</div>

<!-- –ü–†–û–§–ò–õ–¨ -->
<div id="profile" class="screen">
  <div class="title">–ü—Ä–æ—Ñ–∏–ª—å</div>
  <input id="nickname" placeholder="–ù–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
  <div class="profile-row">
    <span>–¢–æ–∫–µ–Ω—ã</span>
    <span class="token" id="tokens">0</span>
  </div>
  <button onclick="saveProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
  <button onclick="goMenu()" style="margin-top:10px;">–ù–∞–∑–∞–¥</button>
</div>

<!-- –ü–ï–†–°–û–ù–ê–ñ–ò -->
<div id="characters" class="screen">
  <div class="title">–ü–µ—Ä—Å–æ–Ω–∞–∂–∏</div>
  <div class="characters-wrapper">
    <div class="characters-grid" id="charactersGrid"></div>
  </div>
  <button onclick="goMenu()" style="margin-top:14px;">–ù–∞–∑–∞–¥</button>
</div>

<!-- –ú–ê–°–¢–ï–†–°–ö–ê–Ø -->
<div id="workshop" class="screen">
  <div class="title">–ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è</div>
  <div class="card">
    <strong>–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (100 —Ç–æ–∫–µ–Ω–æ–≤)</strong>
    <input id="charName" placeholder="–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞">
    <textarea id="charDesc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞"></textarea>
    <input id="charAvatar" placeholder="URL –∞–≤–∞—Ç–∞—Ä–∫–∏">
    <button onclick="createCharacter()" style="margin-top:10px;">–°–æ–∑–¥–∞—Ç—å</button>
  </div>
  <button onclick="goMenu()">–ù–∞–∑–∞–¥</button>
</div>

</div>

<script>
const canonChars = [
  {name:"–ê–ª—É–∫–∞—Ä–¥",desc:"–î—Ä–µ–≤–Ω–∏–π –±–µ—Å—Å–º–µ—Ä—Ç–Ω—ã–π –≤–∞–º–ø–∏—Ä.",avatar:"https://i.imgur.com/7Qp4FZP.jpg"},
  {name:"–°–µ—Ä–∞—Å –í–∏–∫—Ç–æ—Ä–∏—è",desc:"–°–∏–ª—å–Ω–∞—è –∏ —á–µ–ª–æ–≤–µ—á–Ω–∞—è –≤–∞–º–ø–∏—Ä—à–∞.",avatar:"https://i.imgur.com/Jk0yJYF.jpg"},
  {name:"–ò–Ω—Ç–µ–≥—Ä–∞ –•–µ–ª–ª—Å–∏–Ω–≥",desc:"–ñ—ë—Å—Ç–∫–∏–π –ª–∏–¥–µ—Ä –•–µ–ª–ª—Å–∏–Ω–≥–∞.",avatar:"https://i.imgur.com/3Jk6gOQ.jpg"},
  {name:"–†–∏–∞—Å –ì—Ä–µ–º–æ—Ä–∏",desc:"–•–∞—Ä–∏–∑–º–∞—Ç–∏—á–Ω–∞—è –¥–µ–º–æ–Ω–µ—Å—Å–∞.",avatar:"https://i.imgur.com/BH4kG3Y.jpg"},
  {name:"–ê–∫–µ–Ω–æ –•–∏–º—ç–¥–∑–∏–º–∞",desc:"–û–ø–∞—Å–Ω–∞—è –∂—Ä–∏—Ü–∞ –º–æ–ª–Ω–∏–π.",avatar:"https://i.imgur.com/6c0Z5hZ.jpg"},
  {name:"–õ–æ–π–¥ –§–æ—Ä–¥–∂–µ—Ä",desc:"–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–Ω—ã–π —à–ø–∏–æ–Ω.",avatar:"https://i.imgur.com/9U5p4Gk.jpg"},
  {name:"–ô–æ—Ä –§–æ—Ä–¥–∂–µ—Ä",desc:"–°–º–µ—Ä—Ç–æ–Ω–æ—Å–Ω–∞—è —É–±–∏–π—Ü–∞.",avatar:"https://i.imgur.com/HLz7WZ9.jpg"}
];

const profile = JSON.parse(localStorage.getItem("hakkaProfile")) || {
  nick:"–ò–≥—Ä–æ–∫", tokens:100
};

function getUserChars(){
  return JSON.parse(localStorage.getItem("customChars_"+profile.nick)) || [];
}

function saveUserChars(chars){
  localStorage.setItem("customChars_"+profile.nick, JSON.stringify(chars));
}

function openProfile(){
  showScreen("profile");
  nickname.value=profile.nick;
  tokens.textContent=profile.tokens;
}

function saveProfile(){
  profile.nick=nickname.value||"–ò–≥—Ä–æ–∫";
  localStorage.setItem("hakkaProfile",JSON.stringify(profile));
  alert("–ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω");
}

function openCharacters(){
  showScreen("characters");
  renderCharacters();
}

function openWorkshop(){showScreen("workshop")}
function goMenu(){showScreen("menu")}

function renderCharacters(){
  const grid=document.getElementById("charactersGrid");
  grid.innerHTML="";
  [...canonChars, ...getUserChars()].forEach(c=>{
    grid.innerHTML+=`
      <div class="card char-card">
        <div class="avatar" style="background-image:url('${c.avatar}')"></div>
        <strong>${c.name}</strong>
        <p>${c.desc}</p>
      </div>`;
  });
}

function createCharacter(){
  if(profile.tokens<100)return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤");
  if(!charName.value||!charDesc.value||!charAvatar.value)return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è");

  profile.tokens-=100;
  const chars=getUserChars();
  chars.push({
    name:charName.value,
    desc:charDesc.value,
    avatar:charAvatar.value
  });
  saveUserChars(chars);
  localStorage.setItem("hakkaProfile",JSON.stringify(profile));
  charName.value=charDesc.value=charAvatar.value="";
  alert("–ü–µ—Ä—Å–æ–Ω–∞–∂ —Å–æ–∑–¥–∞–Ω (–¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤–∞–º)");
}

function showScreen(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}
</script>

</body>
</html>
